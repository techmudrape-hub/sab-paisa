{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/techs/Downloads/nextjs_1%20%282%29/nextjs_1/src/lib/sabpaisa/decrypt.js"],"sourcesContent":["import crypto from 'node:crypto'\r\nimport { parsePaymentResponse } from 'sabpaisa-pg-dev'; // This is a library that can parse the payment response\r\n\r\n// npm install sabpaisa-pg-dev\r\n\r\n/**\r\n * ============================================\r\n * SABPAISA PAYMENT RESPONSE DECRYPTION UTILITY\r\n * ============================================\r\n * Server-side utility for decrypting SabPaisa payment gateway responses\r\n * This function handles multiple decryption approaches for compatibility\r\n * \r\n * WHY SERVER-SIDE ONLY:\r\n * - Payment gateway secrets (AUTH_KEY, AUTH_IV) should NEVER be exposed to client\r\n * - Client-side decryption breaks after HTTPS redirects (307) in production\r\n * - Server-side decryption works reliably in all environments\r\n */\r\n\r\n/**\r\n * Decrypts SabPaisa encrypted response using AES-256-CBC\r\n * Tries multiple decryption approaches for compatibility with different SabPaisa formats\r\n * \r\n * @param {string} encResponse - Encrypted response string (hex or base64)\r\n * @param {string} authKey - Base64 encoded AES key\r\n * @param {string} authIV - Base64 encoded initialization vector\r\n * @returns {object} Decrypted payment data object or error object\r\n * \r\n */\r\n\r\nexport function decryptSabPaisaResponse(encResponse) {\r\n  try {\r\n    console.log('[DECRYPT] Decrypting payment response:', encResponse)\r\n    return parsePaymentResponse(encResponse)\r\n  } catch (error) {\r\n    console.error('[DECRYPT] Decryption error:', error)\r\n    return { status: 'error', message: `Failed to decrypt response: ${error.message}`, timestamp: new Date().toISOString() }\r\n  }\r\n}\r\n\r\n\r\n// export function decryptSabPaisaResponse(encResponse, authKey, authIV) {\r\n//   try {\r\n//     // Decode base64 strings for key and IV\r\n//     const key = Buffer.from(authKey || '', 'base64')\r\n//     const fullIV = Buffer.from(authIV || '', 'base64')\r\n    \r\n//     // IV must be exactly 16 bytes for AES-256-CBC\r\n//     const iv = fullIV.slice(0, 16)\r\n    \r\n//     // Validate inputs\r\n//     if (!encResponse) {\r\n//       console.log('[DECRYPT] No encrypted response provided')\r\n//       return {\r\n//         status: 'error',\r\n//         message: 'No encrypted response provided',\r\n//         timestamp: new Date().toISOString()\r\n//       }\r\n//     }\r\n\r\n//     if (key.length === 0 || iv.length === 0) {\r\n//       console.error('[DECRYPT] Invalid key or IV length')\r\n//       return {\r\n//         status: 'error',\r\n//         message: 'Invalid encryption key or IV',\r\n//         timestamp: new Date().toISOString()\r\n//       }\r\n//     }\r\n    \r\n//     // Log input details for debugging\r\n//     console.log('[DECRYPT] Input details:', {\r\n//       encResponseLength: encResponse.length,\r\n//       keyLength: key.length,\r\n//       ivLength: iv.length,\r\n//       isHex: /^[0-9A-Fa-f]+$/.test(encResponse),\r\n//     })\r\n    \r\n//     // APPROACH 1: Try with custom padding for SabPaisa format (hex encoded)\r\n//     try {\r\n//       const encryptedData = Buffer.from(encResponse, 'hex')\r\n      \r\n//       // Calculate padding needed for AES block size (16 bytes)\r\n//       const blockSize = 16\r\n//       const remainder = encryptedData.length % blockSize\r\n//       const paddingNeeded = remainder === 0 ? 0 : blockSize - remainder\r\n      \r\n//       // Add padding if needed\r\n//       let paddedData = encryptedData\r\n//       if (paddingNeeded > 0) {\r\n//         paddedData = Buffer.concat([encryptedData, Buffer.alloc(paddingNeeded, paddingNeeded)])\r\n//         console.log('[DECRYPT] Added PKCS#7 padding:', paddingNeeded, 'bytes')\r\n//       }\r\n      \r\n//       // Create decipher with manual padding handling\r\n//       const decipher = crypto.createDecipheriv('aes-256-cbc', key, iv)\r\n//       decipher.setAutoPadding(false)\r\n      \r\n//       // Decrypt the data\r\n//       let decrypted = decipher.update(paddedData)\r\n//       decrypted = Buffer.concat([decrypted, decipher.final()])\r\n      \r\n//       // Remove PKCS#7 padding manually\r\n//       const lastByte = decrypted[decrypted.length - 1]\r\n//       if (lastByte <= blockSize) {\r\n//         let validPadding = true\r\n//         for (let i = 1; i <= lastByte; i++) {\r\n//           if (decrypted[decrypted.length - i] !== lastByte) {\r\n//             validPadding = false\r\n//             break\r\n//           }\r\n//         }\r\n        \r\n//         if (validPadding) {\r\n//           decrypted = decrypted.slice(0, decrypted.length - lastByte)\r\n//         }\r\n//       }\r\n      \r\n//       // Convert to string and clean up non-printable characters\r\n//       let result = decrypted.toString('utf8')\r\n//       console.log('[DECRYPT] Raw decrypted result (first 100 chars):', result.substring(0, 100))\r\n      \r\n//       // Clean the result by removing non-printable characters\r\n//       const cleanedResult = result.replace(/[\\x00-\\x1F\\x7F-\\x9F]/g, '')\r\n      \r\n//       // Try to find a valid JSON object in the result\r\n//       const jsonMatch = cleanedResult.match(/\\{[^\\{\\}]*(?:\\{[^\\{\\}]*\\}[^\\{\\}]*)*\\}/)\r\n//       if (jsonMatch) {\r\n//         console.log('[DECRYPT] Found JSON object in decrypted data')\r\n//         try {\r\n//           const parsedJson = JSON.parse(jsonMatch[0])\r\n//           console.log('[DECRYPT] Successfully parsed JSON from decrypted data')\r\n//           return parsedJson\r\n//         } catch (jsonError) {\r\n//           console.log('[DECRYPT] Found JSON-like content but failed to parse:', jsonError.message)\r\n//         }\r\n//       }\r\n      \r\n//       // If we couldn't find valid JSON, try to extract key-value pairs\r\n//       const keyValuePairs = cleanedResult.match(/([\\w]+)=([^&]+)&?/g)\r\n//       if (keyValuePairs && keyValuePairs.length > 0) {\r\n//         console.log('[DECRYPT] Found key-value pairs in decrypted data')\r\n//         const resultObj = {}\r\n//         keyValuePairs.forEach(pair => {\r\n//           const [key, value] = pair.replace('&', '').split('=')\r\n//           if (key && value) {\r\n//             resultObj[key] = value\r\n//           }\r\n//         })\r\n        \r\n//         if (Object.keys(resultObj).length > 0) {\r\n//           console.log('[DECRYPT] Created object from key-value pairs')\r\n//           return resultObj\r\n//         }\r\n//       }\r\n//     } catch (approachError) {\r\n//       console.log('[DECRYPT] Custom padding approach failed:', approachError.message)\r\n//     }\r\n    \r\n//     // APPROACH 2: Try direct hex decoding with auto padding\r\n//     try {\r\n//       const encryptedData = Buffer.from(encResponse, 'hex')\r\n//       const decipher = crypto.createDecipheriv('aes-256-cbc', key, iv)\r\n//       let decrypted = decipher.update(encryptedData)\r\n//       decrypted = Buffer.concat([decrypted, decipher.final()])\r\n      \r\n//       const result = decrypted.toString('utf8')\r\n//       console.log('[DECRYPT] Direct hex approach succeeded')\r\n      \r\n//       // Try JSON parsing first\r\n//       try {\r\n//         return JSON.parse(result)\r\n//       } catch (jsonError) {\r\n//         console.log('[DECRYPT] JSON parsing failed, trying key-value pairs')\r\n        \r\n//         // Try to parse as key-value pairs (URL-encoded format)\r\n//         const cleanedResult = result.replace(/[\\x00-\\x1F\\x7F-\\x9F]/g, '')\r\n//         const keyValuePairs = cleanedResult.match(/([\\w]+)=([^&]+)&?/g)\r\n//         if (keyValuePairs && keyValuePairs.length > 0) {\r\n//           console.log('[DECRYPT] Found key-value pairs in decrypted data')\r\n//           const resultObj = {}\r\n//           keyValuePairs.forEach(pair => {\r\n//             const [key, value] = pair.replace('&', '').split('=')\r\n//             if (key && value) {\r\n//               resultObj[key] = decodeURIComponent(value)\r\n//             }\r\n//           })\r\n          \r\n//           if (Object.keys(resultObj).length > 0) {\r\n//             console.log('[DECRYPT] Created object from key-value pairs')\r\n//             return resultObj\r\n//           }\r\n//         }\r\n        \r\n//         // If all parsing fails, return error\r\n//         console.log('[DECRYPT] All parsing attempts failed')\r\n//         return { rawResponse: result, status: 'error', message: 'Failed to parse decrypted response' }\r\n//       }\r\n//     } catch (directError) {\r\n//       console.log('[DECRYPT] Direct hex approach failed:', directError.message)\r\n//     }\r\n    \r\n//     // APPROACH 3: Try base64 decoding\r\n//     try {\r\n//       const encryptedData = Buffer.from(encResponse, 'base64')\r\n//       const decipher = crypto.createDecipheriv('aes-256-cbc', key, iv)\r\n//       let decrypted = decipher.update(encryptedData)\r\n//       decrypted = Buffer.concat([decrypted, decipher.final()])\r\n      \r\n//       const result = decrypted.toString('utf8')\r\n//       console.log('[DECRYPT] Base64 approach succeeded')\r\n      \r\n//       // Try JSON parsing first\r\n//       try {\r\n//         return JSON.parse(result)\r\n//       } catch (jsonError) {\r\n//         console.log('[DECRYPT] JSON parsing failed, trying key-value pairs')\r\n        \r\n//         // Try to parse as key-value pairs (URL-encoded format)\r\n//         const cleanedResult = result.replace(/[\\x00-\\x1F\\x7F-\\x9F]/g, '')\r\n//         const keyValuePairs = cleanedResult.match(/([\\w]+)=([^&]+)&?/g)\r\n//         if (keyValuePairs && keyValuePairs.length > 0) {\r\n//           console.log('[DECRYPT] Found key-value pairs in decrypted data')\r\n//           const resultObj = {}\r\n//           keyValuePairs.forEach(pair => {\r\n//             const [key, value] = pair.replace('&', '').split('=')\r\n//             if (key && value) {\r\n//               resultObj[key] = decodeURIComponent(value)\r\n//             }\r\n//           })\r\n          \r\n//           if (Object.keys(resultObj).length > 0) {\r\n//             console.log('[DECRYPT] Created object from key-value pairs')\r\n//             return resultObj\r\n//           }\r\n//         }\r\n        \r\n//         // If all parsing fails, return error\r\n//         console.log('[DECRYPT] All parsing attempts failed')\r\n//         return { rawResponse: result, status: 'error', message: 'Failed to parse decrypted response' }\r\n//       }\r\n//     } catch (base64Error) {\r\n//       console.log('[DECRYPT] Base64 approach failed:', base64Error.message)\r\n//     }\r\n    \r\n//     // APPROACH 4: Return a fallback response with the error\r\n//     console.log('[DECRYPT] All decryption approaches failed, returning fallback response')\r\n//     return {\r\n//       status: 'error',\r\n//       message: 'Failed to decrypt the payment response',\r\n//       encryptedResponse: encResponse.substring(0, 50) + '...',\r\n//       timestamp: new Date().toISOString()\r\n//     }\r\n//   } catch (error) {\r\n//     console.error('[DECRYPT] Decryption error:', error)\r\n//     return {\r\n//       status: 'error',\r\n//       message: `Failed to decrypt response: ${error.message}`,\r\n//       timestamp: new Date().toISOString()\r\n//     }\r\n//   }\r\n// }\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/techs/Downloads/nextjs_1%20%282%29/nextjs_1/src/lib/database.js"],"sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\n\r\nconst DB_FILE = path.join(process.cwd(), 'data', 'transactions.json');\r\n\r\n// Ensure data directory exists\r\nconst ensureDataDir = () => {\r\n  const dataDir = path.dirname(DB_FILE);\r\n  if (!fs.existsSync(dataDir)) {\r\n    fs.mkdirSync(dataDir, { recursive: true });\r\n  }\r\n};\r\n\r\n// Read transactions from file\r\nexport const readTransactions = () => {\r\n  try {\r\n    ensureDataDir();\r\n    if (!fs.existsSync(DB_FILE)) {\r\n      return [];\r\n    }\r\n    const data = fs.readFileSync(DB_FILE, 'utf8');\r\n    return JSON.parse(data);\r\n  } catch (error) {\r\n    console.error('Error reading transactions:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// Write transactions to file\r\nexport const writeTransactions = (transactions) => {\r\n  try {\r\n    ensureDataDir();\r\n    fs.writeFileSync(DB_FILE, JSON.stringify(transactions, null, 2));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error writing transactions:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n// Save a single transaction\r\nexport const saveTransaction = (transactionData) => {\r\n  try {\r\n    const transactions = readTransactions();\r\n    \r\n    // Check if transaction already exists (by txnId)\r\n    const existingIndex = transactions.findIndex(t => t.txnId === transactionData.txnId);\r\n    \r\n    if (existingIndex >= 0) {\r\n      // Update existing transaction\r\n      transactions[existingIndex] = {\r\n        ...transactions[existingIndex],\r\n        ...transactionData,\r\n        updatedAt: new Date().toISOString()\r\n      };\r\n    } else {\r\n      // Add new transaction\r\n      transactions.push({\r\n        ...transactionData,\r\n        createdAt: transactionData.createdAt || new Date().toISOString(),\r\n        updatedAt: new Date().toISOString()\r\n      });\r\n    }\r\n    \r\n    const success = writeTransactions(transactions);\r\n    if (success) {\r\n      console.log(`Transaction ${transactionData.txnId} saved with status: ${transactionData.status}`);\r\n    }\r\n    return success;\r\n  } catch (error) {\r\n    console.error('Error saving transaction:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n// Get transaction by txnId\r\nexport const getTransaction = (txnId) => {\r\n  const transactions = readTransactions();\r\n  return transactions.find(t => t.txnId === txnId);\r\n};\r\n\r\n// Get all transactions\r\nexport const getAllTransactions = () => {\r\n  return readTransactions();\r\n};\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;AAEA,MAAM,UAAU,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAEjD,+BAA+B;AAC/B,MAAM,gBAAgB;IACpB,MAAM,UAAU,iGAAA,CAAA,UAAI,CAAC,OAAO,CAAC;IAC7B,IAAI,CAAC,6FAAA,CAAA,UAAE,CAAC,UAAU,CAAC,UAAU;QAC3B,6FAAA,CAAA,UAAE,CAAC,SAAS,CAAC,SAAS;YAAE,WAAW;QAAK;IAC1C;AACF;AAGO,MAAM,mBAAmB;IAC9B,IAAI;QACF;QACA,IAAI,CAAC,6FAAA,CAAA,UAAE,CAAC,UAAU,CAAC,UAAU;YAC3B,OAAO,EAAE;QACX;QACA,MAAM,OAAO,6FAAA,CAAA,UAAE,CAAC,YAAY,CAAC,SAAS;QACtC,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,EAAE;IACX;AACF;AAGO,MAAM,oBAAoB,CAAC;IAChC,IAAI;QACF;QACA,6FAAA,CAAA,UAAE,CAAC,aAAa,CAAC,SAAS,KAAK,SAAS,CAAC,cAAc,MAAM;QAC7D,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO;IACT;AACF;AAGO,MAAM,kBAAkB,CAAC;IAC9B,IAAI;QACF,MAAM,eAAe;QAErB,iDAAiD;QACjD,MAAM,gBAAgB,aAAa,SAAS,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,gBAAgB,KAAK;QAEnF,IAAI,iBAAiB,GAAG;YACtB,8BAA8B;YAC9B,YAAY,CAAC,cAAc,GAAG;gBAC5B,GAAG,YAAY,CAAC,cAAc;gBAC9B,GAAG,eAAe;gBAClB,WAAW,IAAI,OAAO,WAAW;YACnC;QACF,OAAO;YACL,sBAAsB;YACtB,aAAa,IAAI,CAAC;gBAChB,GAAG,eAAe;gBAClB,WAAW,gBAAgB,SAAS,IAAI,IAAI,OAAO,WAAW;gBAC9D,WAAW,IAAI,OAAO,WAAW;YACnC;QACF;QAEA,MAAM,UAAU,kBAAkB;QAClC,IAAI,SAAS;YACX,QAAQ,GAAG,CAAC,CAAC,YAAY,EAAE,gBAAgB,KAAK,CAAC,oBAAoB,EAAE,gBAAgB,MAAM,EAAE;QACjG;QACA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO;IACT;AACF;AAGO,MAAM,iBAAiB,CAAC;IAC7B,MAAM,eAAe;IACrB,OAAO,aAAa,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;AAC5C;AAGO,MAAM,qBAAqB;IAChC,OAAO;AACT","debugId":null}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/techs/Downloads/nextjs_1%20%282%29/nextjs_1/src/lib/siteAClient.js"],"sourcesContent":["export const sendTransactionToSiteB = async (transactionPayload) => {\r\n  try {\r\n    const SITE_A_PROXY_ENDPOINT = \"/api/transactions\";\r\n    const BEARER_TOKEN = process.env.NEXT_PUBLIC_BEARER_TOKEN || \"testtoken123\";\r\n    const SHARED_SECRET = process.env.SHARED_SECRET || \"mytransactionsecratekeyinder81\";\r\n\r\n    // Ensure complete payload\r\n    const completePayload = {\r\n      txnId: transactionPayload.txnId || `TXN-${Date.now()}`,\r\n      payerName: transactionPayload.payerName || \"Unknown User\",\r\n      payerEmail: transactionPayload.payerEmail || \"unknown@example.com\",\r\n      amount: transactionPayload.amount || 0,\r\n      description: transactionPayload.description || \"Payment\",\r\n      type: transactionPayload.type || \"PAYMENT\",\r\n      referenceId: transactionPayload.referenceId || \"REF-${Date.now()}\",\r\n      currency: transactionPayload.currency || \"INR\",\r\n      status: transactionPayload.status || \"UNKNOWN\",\r\n      responseMessage: transactionPayload.responseMessage || \"\",\r\n      userId: transactionPayload.userId || \"\",\r\n      metadata: transactionPayload.metadata || {},\r\n      statusCode: transactionPayload.statusCode || \"PENDING\",\r\n      createdAt: transactionPayload.createdAt || new Date().toISOString(),\r\n    };\r\n\r\n    console.log(\"Sending to Site B:\", SITE_A_PROXY_ENDPOINT, completePayload);\r\n\r\n    const response = await fetch(SITE_A_PROXY_ENDPOINT, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${BEARER_TOKEN}`,\r\n        \"x-shared-secret\": SHARED_SECRET,\r\n      },\r\n      body: JSON.stringify(completePayload),\r\n    });\r\n\r\n    const responseText = await response.text();\r\n    console.log(\"Raw Response:\", responseText);\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Site B Error (Status ${response.status}): ${responseText}`);\r\n    }\r\n\r\n    let data;\r\n    try {\r\n      data = JSON.parse(responseText);\r\n    } catch {\r\n      data = { raw: responseText };\r\n    }\r\n\r\n    console.log(\"Parsed Response:\", data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Failed to send transaction:\", error.message);\r\n    throw error;\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;AAAO,MAAM,yBAAyB,OAAO;IAC3C,IAAI;QACF,MAAM,wBAAwB;QAC9B,MAAM,eAAe,uDAAwC;QAC7D,MAAM,gBAAgB,QAAQ,GAAG,CAAC,aAAa,IAAI;QAEnD,0BAA0B;QAC1B,MAAM,kBAAkB;YACtB,OAAO,mBAAmB,KAAK,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI;YACtD,WAAW,mBAAmB,SAAS,IAAI;YAC3C,YAAY,mBAAmB,UAAU,IAAI;YAC7C,QAAQ,mBAAmB,MAAM,IAAI;YACrC,aAAa,mBAAmB,WAAW,IAAI;YAC/C,MAAM,mBAAmB,IAAI,IAAI;YACjC,aAAa,mBAAmB,WAAW,IAAI;YAC/C,UAAU,mBAAmB,QAAQ,IAAI;YACzC,QAAQ,mBAAmB,MAAM,IAAI;YACrC,iBAAiB,mBAAmB,eAAe,IAAI;YACvD,QAAQ,mBAAmB,MAAM,IAAI;YACrC,UAAU,mBAAmB,QAAQ,IAAI,CAAC;YAC1C,YAAY,mBAAmB,UAAU,IAAI;YAC7C,WAAW,mBAAmB,SAAS,IAAI,IAAI,OAAO,WAAW;QACnE;QAEA,QAAQ,GAAG,CAAC,sBAAsB,uBAAuB;QAEzD,MAAM,WAAW,MAAM,MAAM,uBAAuB;YAClD,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,iBAAiB,CAAC,OAAO,EAAE,cAAc;gBACzC,mBAAmB;YACrB;YACA,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,MAAM,eAAe,MAAM,SAAS,IAAI;QACxC,QAAQ,GAAG,CAAC,iBAAiB;QAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM,CAAC,qBAAqB,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,cAAc;QAC7E;QAEA,IAAI;QACJ,IAAI;YACF,OAAO,KAAK,KAAK,CAAC;QACpB,EAAE,OAAM;YACN,OAAO;gBAAE,KAAK;YAAa;QAC7B;QAEA,QAAQ,GAAG,CAAC,oBAAoB;QAChC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B,MAAM,OAAO;QAC1D,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 392, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/techs/Downloads/nextjs_1%20%282%29/nextjs_1/src/components/PaymentStatus.js/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/PaymentStatus.js <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/PaymentStatus.js <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,6OAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAmS,GAChU,iEACA","debugId":null}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/techs/Downloads/nextjs_1%20%282%29/nextjs_1/src/components/PaymentStatus.js/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/PaymentStatus.js from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/PaymentStatus.js\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,6OAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA+Q,GAC5S,6CACA","debugId":null}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 424, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/techs/Downloads/nextjs_1%20%282%29/nextjs_1/src/app/response/page.js"],"sourcesContent":["/**\n * ============================================\n * PAYMENT RESPONSE PAGE - SERVER-SIDE RENDERED\n * ============================================\n * \n * WHY SERVER-SIDE:\n * - Payment gateway secrets (AUTH_KEY, AUTH_IV) are server-only (NOT NEXT_PUBLIC_*)\n * - Client-side decryption breaks after HTTP → HTTPS redirects (307) in production\n * - Server-side decryption works reliably in all environments\n * - Prevents exposure of sensitive encryption keys to the browser\n * \n * This page:\n * 1. Reads encrypted response from URL searchParams (server-side)\n * 2. Decrypts payment data on the server using AUTH_KEY/AUTH_IV env vars\n * 3. Fetches userId from database if needed\n * 4. Sends transaction update to Site B (server-side)\n * 5. Renders decrypted data in a table\n */\n\nimport { decryptSabPaisaResponse } from '@/lib/sabpaisa/decrypt'\nimport { getTransaction } from '@/lib/database'\nimport { sendTransactionToSiteB } from '@/lib/siteAClient'\nimport PaymentStatus from '@/components/PaymentStatus'\n\n/**\n * Maps SabPaisa payment status to standardized status\n */\nfunction mapPaymentStatus(paymentData) {\n  const rawStatus = (paymentData.status || paymentData.STATUS || paymentData.paymentStatus || '').toString().toUpperCase()\n  const statusCode = (paymentData.statusCode || paymentData.STATUS_CODE || paymentData.gatewayResponseCode || '').toString()\n  const respMsg = (paymentData.sabpaisaMessage || paymentData.responseMessage || paymentData.RESPONSE_MESSAGE || paymentData.message || paymentData.bankMessage || '').toString()\n\n  // Known success signals\n  const isExplicitSuccess = rawStatus === 'SUCCESS' || rawStatus === 'SUCCESSFUL' || rawStatus === 'COMPLETED'\n  if (isExplicitSuccess) {\n    return { status: 'success', message: respMsg || 'Payment completed successfully!' }\n  }\n\n  // Known failure signals\n  const isExplicitFailure = rawStatus === 'FAILED' || rawStatus === 'FAILURE' || rawStatus === 'CANCELLED' || rawStatus === 'CANCELED' || rawStatus === 'ERROR' || rawStatus === 'REJECTED'\n  if (isExplicitFailure) {\n    return { status: 'cancelled', message: respMsg || 'Payment was cancelled or failed.' }\n  }\n\n  // Check status codes for additional validation\n  if (statusCode === '0000' || statusCode === '00') {\n    return { status: 'success', message: respMsg || 'Payment completed successfully!' }\n  }\n  \n  if (statusCode && statusCode !== '0000' && statusCode !== '00') {\n    return { status: 'cancelled', message: respMsg || 'Payment failed with status code: ' + statusCode }\n  }\n\n  // Otherwise keep pending\n  return { status: 'pending', message: respMsg || 'Payment is being processed...' }\n}\n\n/**\n * Extracts field value with multiple fallback options\n */\nfunction extractField(obj, fieldNames, defaultValue = '') {\n  for (const fieldName of fieldNames) {\n    if (obj[fieldName] !== undefined && obj[fieldName] !== null && obj[fieldName] !== '') {\n      return obj[fieldName]\n    }\n  }\n  return defaultValue\n}\n\n/**\n * Server Component - Payment Response Page\n * \n * @param {Object} props - Component props\n * @param {Object} props.searchParams - URL search parameters (Next.js App Router)\n */\nexport default async function ResponsePage({ searchParams }) {\n  // Get encrypted response and client code from URL search params (server-side)\n  const encResponse = searchParams?.encResponse\n  const clientCode = searchParams?.clientCode\n  const urlSuccess = searchParams?.success\n  const urlError = searchParams?.error\n\n  // Get encryption keys from server environment variables\n  // For production: Use AUTH_KEY and AUTH_IV (server-only, NOT NEXT_PUBLIC_*)\n  // For development: Fallback to defaults if env vars not set\n  const authKey = process.env.AUTH_KEY || process.env.NEXT_PUBLIC_AUTH_KEY || \"doJx8Ihyb2s/sh1pbYEDfa6JdsogEYMXKEoPF/BEwrg=\"\n  const authIV = process.env.AUTH_IV || process.env.NEXT_PUBLIC_AUTH_IV || \"iw/0vT01OWRph/rQplst/W7k423JXrgo4xBn3gXPsIDXTTXE461f4V4QYKGQ8wTe\"\n\n  let decryptedData = null\n  let paymentStatus = 'pending'\n  let paymentMessage = 'Processing payment response...'\n  let siteBStatus = null\n  let siteBMessage = ''\n  let error = null\n\n  // Check if required parameters are present\n  if (!encResponse || !clientCode) {\n    error = {\n      message: 'Missing payment response parameters',\n      details: {\n        encResponse: !encResponse ? 'Missing' : 'Present',\n        clientCode: !clientCode ? 'Missing' : 'Present'\n      },\n      suggestion: 'Please complete the payment or check the payment status.'\n    }\n  } else if (!authKey || !authIV) {\n    error = {\n      message: 'Server configuration error: Missing encryption keys',\n      details: {\n        authKey: !authKey ? 'Missing' : 'Present',\n        authIV: !authIV ? 'Missing' : 'Present'\n      },\n      suggestion: 'Please contact support. Server encryption keys are not configured.'\n    }\n  } else {\n    try {\n      // Decrypt payment response on the server\n      console.log('[RESPONSE] Decrypting payment response on server...')\n      decryptedData = decryptSabPaisaResponse(encResponse, authKey, authIV)\n      \n      // Check if decryption was successful\n      if (decryptedData && decryptedData.status === 'error') {\n        error = {\n          message: 'Failed to decrypt payment response',\n          details: decryptedData.message,\n          suggestion: 'The payment response could not be decrypted. Please contact support.'\n        }\n      } else if (!decryptedData || typeof decryptedData !== 'object') {\n        error = {\n          message: 'Invalid payment response data',\n          details: 'Decrypted data is not a valid object',\n          suggestion: 'Please try again or contact support if the issue persists.'\n        }\n      } else if (decryptedData.rawResponse) {\n        // rawResponse means JSON parsing failed - decryption partially worked but data is corrupted\n        error = {\n          message: 'Failed to parse decrypted payment response',\n          details: 'The payment response was decrypted but could not be parsed. This may indicate corrupted or invalid data.',\n          suggestion: 'Please contact support with the transaction details.'\n        }\n        console.error('[RESPONSE] Decryption returned rawResponse - JSON parsing failed')\n        // Don't process further if we have rawResponse\n        decryptedData = null\n      } else {\n        // Validate that we have at least some expected payment fields\n        const hasValidFields = decryptedData.status || decryptedData.STATUS || \n                              decryptedData.txnId || decryptedData.clientTxnId || \n                              decryptedData.CLIENT_TXN_ID || decryptedData.amount || \n                              decryptedData.AMOUNT\n        \n        if (!hasValidFields && Object.keys(decryptedData).length > 0) {\n          // Check if all values look corrupted (contain unusual characters)\n          const allValuesCorrupted = Object.values(decryptedData).every(val => {\n            const strVal = String(val)\n            // Check if value contains mostly non-printable or unusual characters\n            return strVal.length > 0 && /[^\\x20-\\x7E]/.test(strVal) && \n                   strVal.match(/[^\\x20-\\x7E]/g)?.length > strVal.length * 0.3\n          })\n          \n          if (allValuesCorrupted) {\n            error = {\n              message: 'Decrypted data appears to be corrupted',\n              details: 'The payment response was decrypted but the data appears corrupted or invalid.',\n              suggestion: 'Please contact support with the transaction details.'\n            }\n            console.error('[RESPONSE] Decrypted data appears corrupted - all values contain unusual characters')\n            decryptedData = null\n          }\n        }\n        \n        if (decryptedData) {\n        // Map payment status\n        const statusInfo = mapPaymentStatus(decryptedData)\n        paymentStatus = statusInfo.status\n        paymentMessage = statusInfo.message\n\n        console.log('[RESPONSE] Payment status:', paymentStatus, paymentMessage)\n\n        // Extract transaction details\n        const clientTxnId = extractField(decryptedData, ['clientTxnId', 'CLIENT_TXN_ID', 'txnId'], '')\n        \n        // Try to fetch userId from database (stored during payment initiation)\n        let userIdFromDB = null\n        if (clientTxnId) {\n          try {\n            const dbTransaction = getTransaction(clientTxnId)\n            if (dbTransaction) {\n              userIdFromDB = dbTransaction.userId || dbTransaction.metadata?.userId || null\n              console.log('[RESPONSE] Fetched userId from database:', userIdFromDB)\n            }\n          } catch (dbError) {\n            console.warn('[RESPONSE] Could not fetch from database:', dbError)\n          }\n        }\n\n        // Extract userId from metadata or decrypted data\n        const userIdFromMetadata = decryptedData.metadata?.userId || decryptedData.metadata?.USER_ID\n        const finalUserId = userIdFromDB || userIdFromMetadata || extractField(decryptedData, ['userId', 'payerEmail', 'PAYER_EMAIL'], '')\n\n        // Build payload for Site B\n        const updatePayload = {\n          txnId: clientTxnId,\n          sabpaisaTxnId: extractField(decryptedData, ['sabpaisaTxnId', 'SABPAISA_TXN_ID', 'txnId'], ''),\n          referenceId: clientTxnId,\n          amount: Number(extractField(decryptedData, ['amount', 'AMOUNT'], 0)),\n          status: statusInfo.status === 'success' ? 'SUCCESS' : (statusInfo.status === 'cancelled' ? 'FAILED' : 'PENDING'),\n          responseMessage: extractField(decryptedData, ['sabpaisaMessage', 'responseMessage', 'message', 'bankMessage'], statusInfo.message),\n          userId: finalUserId,\n          type: extractField(decryptedData, ['type'], 'PAYMENT'),\n          description: extractField(decryptedData, ['description'], 'Payment'),\n          payerName: extractField(decryptedData, ['payerName', 'PAYER_NAME', 'customerName', 'CUSTOMER_NAME'], 'Unknown User'),\n          payerEmail: extractField(decryptedData, ['payerEmail', 'PAYER_EMAIL', 'email', 'EMAIL'], ''),\n          statusCode: extractField(decryptedData, ['statusCode', 'STATUS_CODE', 'gatewayResponseCode', 'responseCode'], statusInfo.status === 'success' ? '0000' : '9999'),\n          metadata: { ...decryptedData },\n          createdAt: new Date().toISOString()\n        }\n\n        console.log('[RESPONSE] Sending transaction to Site B...')\n        console.log('[RESPONSE] Final userId:', finalUserId)\n        console.log('[RESPONSE] Payment status:', updatePayload.status)\n\n        // Send to Site B (server-side)\n        try {\n          await sendTransactionToSiteB(updatePayload)\n          siteBStatus = 'success'\n          siteBMessage = 'Transaction saved successfully'\n          console.log('[RESPONSE] Transaction sent to Site B successfully')\n        } catch (siteBError) {\n          console.error('[RESPONSE] Error sending to Site B:', siteBError)\n          siteBStatus = 'error'\n          siteBMessage = 'Transaction processed but failed to update external system. Please contact support.'\n        }\n        }\n      }\n    } catch (err) {\n      console.error('[RESPONSE] Error processing payment response:', err)\n      error = {\n        message: 'Error processing payment response',\n        details: err.message || 'Unknown error',\n        suggestion: 'Please contact support if this issue persists.'\n      }\n    }\n  }\n\n  // Prepare response data for display\n  const responseEntries = decryptedData && typeof decryptedData === 'object' \n    ? Object.entries(decryptedData) \n    : []\n\n  // Render the page\n  return (\n    <div style={{ padding: '2rem', fontFamily: 'Arial, sans-serif', maxWidth: '1200px', margin: '0 auto' }}>\n      {/* Back Button */}\n      <div style={{ marginBottom: '20px', textAlign: 'right' }}>\n        <a \n          href=\"/\" \n          style={{\n            display: 'inline-block',\n            padding: '10px 20px',\n            backgroundColor: '#007bff',\n            color: 'white',\n            textDecoration: 'none',\n            borderRadius: '5px',\n            fontWeight: 'bold'\n          }}\n        >\n          ← Back to Add Money\n        </a>\n      </div>\n\n      <h2 style={{ marginTop: 0 }}>Payment Response Details</h2>\n\n      {/* Error State */}\n      {error && (\n        <div style={{\n          padding: '20px',\n          marginBottom: '20px',\n          backgroundColor: '#f8d7da',\n          border: '1px solid #f5c6cb',\n          borderRadius: '5px',\n          color: '#721c24'\n        }}>\n          <h3 style={{ marginTop: 0, color: '#721c24' }}>⚠️ {error.message}</h3>\n          {error.details && (\n            <p style={{ margin: '10px 0' }}>\n              <strong>Details:</strong> {typeof error.details === 'object' ? JSON.stringify(error.details, null, 2) : error.details}\n            </p>\n          )}\n          {error.suggestion && (\n            <p style={{ margin: '10px 0', fontWeight: 'bold' }}>\n              {error.suggestion}\n            </p>\n          )}\n        </div>\n      )}\n\n      {/* Payment Status Component */}\n      {!error && paymentStatus && (\n        <PaymentStatus \n          status={paymentStatus} \n          message={paymentMessage}\n        />\n      )}\n\n      {/* Site B Status */}\n      {siteBStatus && (\n        <div style={{\n          marginBottom: '1rem',\n          padding: '10px',\n          borderRadius: '5px',\n          backgroundColor: siteBStatus === 'success' ? '#d4edda' : '#f8d7da',\n          border: `1px solid ${siteBStatus === 'success' ? '#c3e6cb' : '#f5c6cb'}`,\n          color: siteBStatus === 'success' ? '#155724' : '#721c24'\n        }}>\n          <strong>{siteBMessage}</strong>\n        </div>\n      )}\n\n      {/* Empty State */}\n      {!error && responseEntries.length === 0 && (\n        <div style={{\n          padding: '40px',\n          textAlign: 'center',\n          backgroundColor: '#fff3cd',\n          border: '1px solid #ffc107',\n          borderRadius: '5px',\n          marginBottom: '20px'\n        }}>\n          <h3 style={{ color: '#856404', marginTop: 0 }}>⚠️ No Payment Data Found</h3>\n          <p style={{ color: '#856404' }}>\n            No payment response data was received. This could happen if:\n          </p>\n          <ul style={{ textAlign: 'left', display: 'inline-block', color: '#856404' }}>\n            <li>Payment gateway did not redirect properly with parameters</li>\n            <li>Payment transaction was not completed</li>\n            <li>You accessed this page directly without completing a payment</li>\n          </ul>\n        </div>\n      )}\n\n      {/* Response Table */}\n      {responseEntries.length > 0 && (\n        <div style={{ marginTop: '20px' }}>\n          <h3 style={{ marginBottom: '10px' }}>Response Data:</h3>\n          <table border=\"1\" cellPadding=\"10\" cellSpacing=\"0\" style={{ width: '100%', borderCollapse: 'collapse', backgroundColor: 'white' }}>\n            <thead style={{ backgroundColor: '#f2f2f2' }}>\n              <tr>\n                <th style={{ textAlign: 'left', padding: '12px' }}>Field</th>\n                <th style={{ textAlign: 'left', padding: '12px' }}>Value</th>\n              </tr>\n            </thead>\n            <tbody>\n              {responseEntries.map(([key, value]) => (\n                <tr key={key} style={{ borderBottom: '1px solid #ddd' }}>\n                  <td style={{ padding: '10px', fontWeight: 'bold' }}>{key}</td>\n                  <td style={{ padding: '10px', wordBreak: 'break-word' }}>\n                    {value === null || value === undefined ? (\n                      <i style={{ color: 'gray' }}>N/A</i>\n                    ) : typeof value === 'object' ? (\n                      <pre style={{ margin: 0, fontSize: '12px', overflow: 'auto' }}>\n                        {JSON.stringify(value, null, 2)}\n                      </pre>\n                    ) : (\n                      String(value)\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}