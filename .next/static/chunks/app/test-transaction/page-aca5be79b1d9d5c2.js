(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{2857:(e,t,r)=>{"use strict";r.d(t,{r:()=>s});let n=["referenceId","amount","type","description","metadata","createdAt"];async function s(e){let t;for(let t of n)if(!(t in e))throw Error("Missing field: ".concat(t));let r={"Content-Type":"application/json"};r.Authorization="Bearer ".concat("my-client-token");let s=await fetch("/api/transactions",{method:"POST",headers:r,body:JSON.stringify(e),cache:"no-store"}),o=await s.text();try{t=o?JSON.parse(o):null}catch(e){t={raw:o}}if(!s.ok){let e=Error("Proxy error: ".concat(s.status," - ").concat((null==t?void 0:t.error)||o));throw e.status=s.status,e.data=t,console.error("API route error:",{status:s.status,text:o,parsed:t}),e}return t}},7824:(e,t,r)=>{Promise.resolve().then(r.bind(r,9280))},9280:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(5155),s=r(2115),o=r(2857);function i(){let[e,t]=(0,s.useState)(!1),[r,i]=(0,s.useState)(null),[a,c]=(0,s.useState)(null),d=async()=>{t(!0),c(null),i(null);try{let e={referenceId:"REF-".concat(Date.now()),amount:1999,type:"SALE",description:"Test transaction from Next.js app",metadata:{orderId:"O-".concat(Date.now()),customerId:"CUST-123",source:"nextjs-app"},createdAt:new Date().toISOString()};console.log("Sending transaction to Site B:",e);let t=await (0,o.r)(e);i(t),console.log("Site B response:",t)}catch(e){c(e.message),console.error("Transaction failed:",e)}finally{t(!1)}};return(0,n.jsxs)("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[(0,n.jsx)("h1",{children:"Test Transaction to Site B"}),(0,n.jsxs)("p",{children:["This will send transaction data to: ",(0,n.jsx)("code",{children:"http://localhost:3000/transactions"})]}),(0,n.jsx)("button",{onClick:d,disabled:e,style:{padding:"10px 20px",backgroundColor:e?"#ccc":"#0070f3",color:"white",border:"none",borderRadius:"5px",cursor:e?"not-allowed":"pointer"},children:e?"Sending...":"Send Test Transaction"}),a&&(0,n.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#ffebee",border:"1px solid #f44336",borderRadius:"5px",color:"#c62828"},children:[(0,n.jsx)("strong",{children:"Error:"})," ",a]}),r&&(0,n.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#e8f5e8",border:"1px solid #4caf50",borderRadius:"5px",color:"#2e7d32"},children:[(0,n.jsx)("strong",{children:"Success! Site B Response:"}),(0,n.jsx)("pre",{style:{marginTop:"10px",fontSize:"12px",overflow:"auto"},children:JSON.stringify(r,null,2)})]}),(0,n.jsxs)("div",{style:{marginTop:"30px",fontSize:"14px",color:"#666"},children:[(0,n.jsx)("h3",{children:"Transaction Data Structure:"}),(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"referenceId:"})," Unique transaction reference"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"amount:"})," Transaction amount (1999)"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"type:"})," Transaction type (SALE)"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"description:"})," Transaction description"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"metadata:"})," Additional data (orderId, customerId, source)"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"createdAt:"})," ISO timestamp"]})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Security:"})," Data is signed with HMAC-SHA256 using SHARED_SECRET"]})]})]})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=7824)),_N_E=e.O()}]);