(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{5418:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var n=t(5155),s=t(2115),o=t(9571);function i(){let[e,r]=(0,s.useState)(!1),[t,i]=(0,s.useState)(null),[a,d]=(0,s.useState)(null),c=async()=>{r(!0),d(null),i(null);try{let e={referenceId:`REF-${Date.now()}`,amount:1999,type:"SALE",description:"Test transaction from Next.js app",metadata:{orderId:`O-${Date.now()}`,customerId:"CUST-123",source:"nextjs-app"},createdAt:new Date().toISOString()};console.log("Sending transaction to Site B:",e);let r=await (0,o.r)(e);i(r),console.log("Site B response:",r)}catch(e){d(e.message),console.error("Transaction failed:",e)}finally{r(!1)}};return(0,n.jsxs)("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[(0,n.jsx)("h1",{children:"Test Transaction to Site B"}),(0,n.jsxs)("p",{children:["This will send transaction data to: ",(0,n.jsx)("code",{children:"http://localhost:3000/transactions"})]}),(0,n.jsx)("button",{onClick:c,disabled:e,style:{padding:"10px 20px",backgroundColor:e?"#ccc":"#0070f3",color:"white",border:"none",borderRadius:"5px",cursor:e?"not-allowed":"pointer"},children:e?"Sending...":"Send Test Transaction"}),a&&(0,n.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#ffebee",border:"1px solid #f44336",borderRadius:"5px",color:"#c62828"},children:[(0,n.jsx)("strong",{children:"Error:"})," ",a]}),t&&(0,n.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#e8f5e8",border:"1px solid #4caf50",borderRadius:"5px",color:"#2e7d32"},children:[(0,n.jsx)("strong",{children:"Success! Site B Response:"}),(0,n.jsx)("pre",{style:{marginTop:"10px",fontSize:"12px",overflow:"auto"},children:JSON.stringify(t,null,2)})]}),(0,n.jsxs)("div",{style:{marginTop:"30px",fontSize:"14px",color:"#666"},children:[(0,n.jsx)("h3",{children:"Transaction Data Structure:"}),(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"referenceId:"})," Unique transaction reference"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"amount:"})," Transaction amount (1999)"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"type:"})," Transaction type (SALE)"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"description:"})," Transaction description"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"metadata:"})," Additional data (orderId, customerId, source)"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"createdAt:"})," ISO timestamp"]})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Security:"})," Data is signed with HMAC-SHA256 using SHARED_SECRET"]})]})]})}},7824:(e,r,t)=>{Promise.resolve().then(t.bind(t,5418))},9571:(e,r,t)=>{"use strict";t.d(r,{r:()=>s});let n=["referenceId","amount","type","description","metadata","createdAt"];async function s(e){let r;for(let r of n)if(!(r in e))throw Error(`Missing field: ${r}`);let t={"Content-Type":"application/json"};t.Authorization="Bearer my-client-token";let s=await fetch("/api/transactions",{method:"POST",headers:t,body:JSON.stringify(e),cache:"no-store"}),o=await s.text();try{r=o?JSON.parse(o):null}catch(e){r={raw:o}}if(!s.ok){let e=Error(`Proxy error: ${s.status} - ${r?.error||o}`);throw e.status=s.status,e.data=r,console.error("API route error:",{status:s.status,text:o,parsed:r}),e}return r}}},e=>{e.O(0,[441,794,358],()=>e(e.s=7824)),_N_E=e.O()}]);