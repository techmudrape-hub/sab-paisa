(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{7815:(e,n,s)=>{"use strict";s.d(n,{r:()=>o}),s(7936),s(9509);let t=["referenceId","amount","type","description","metadata","createdAt"];async function o(e){let n;for(let n of t)if(!(n in e))throw Error("Missing field: ".concat(n));let s={"Content-Type":"application/json"};s.Authorization="Bearer ".concat("my-client-token");let o=await fetch("/api/transactions",{method:"POST",headers:s,body:JSON.stringify(e),cache:"no-store"}),r=await o.text();try{n=r?JSON.parse(r):null}catch(e){n={raw:r}}if(!o.ok){let e=Error("Proxy error: ".concat(o.status," - ").concat((null==n?void 0:n.error)||r));throw e.status=o.status,e.data=n,console.error("API route error:",{status:o.status,text:r,parsed:n}),e}return n}},7824:(e,n,s)=>{Promise.resolve().then(s.bind(s,9280))},7936:()=>{throw Error('Module build failed: UnhandledSchemeError: Reading from "node:crypto" is not handled by plugins (Unhandled scheme).\nWebpack supports "data:" and "file:" URIs by default.\nYou may need an additional plugin to handle "node:" URIs.\n    at C:\\Users\\techs\\Downloads\\nextjs_1 (2)\\nextjs_1\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:408351\n    at Hook.eval [as callAsync] (eval at create (C:\\Users\\techs\\Downloads\\nextjs_1 (2)\\nextjs_1\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:14:9224), <anonymous>:6:1)\n    at Hook.CALL_ASYNC_DELEGATE [as _callAsync] (C:\\Users\\techs\\Downloads\\nextjs_1 (2)\\nextjs_1\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:14:6378)\n    at Object.processResource (C:\\Users\\techs\\Downloads\\nextjs_1 (2)\\nextjs_1\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:408276)\n    at processResource (C:\\Users\\techs\\Downloads\\nextjs_1 (2)\\nextjs_1\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5308)\n    at iteratePitchingLoaders (C:\\Users\\techs\\Downloads\\nextjs_1 (2)\\nextjs_1\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:4667)\n    at runLoaders (C:\\Users\\techs\\Downloads\\nextjs_1 (2)\\nextjs_1\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:8590)\n    at NormalModule._doBuild (C:\\Users\\techs\\Downloads\\nextjs_1 (2)\\nextjs_1\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:408138)\n    at NormalModule.build (C:\\Users\\techs\\Downloads\\nextjs_1 (2)\\nextjs_1\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:410151)\n    at C:\\Users\\techs\\Downloads\\nextjs_1 (2)\\nextjs_1\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:82479')},9280:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>d});var t=s(5155),o=s(2115),r=s(7815);function d(){let[e,n]=(0,o.useState)(!1),[s,d]=(0,o.useState)(null),[a,l]=(0,o.useState)(null),i=async()=>{n(!0),l(null),d(null);try{let e={referenceId:"REF-".concat(Date.now()),amount:1999,type:"SALE",description:"Test transaction from Next.js app",metadata:{orderId:"O-".concat(Date.now()),customerId:"CUST-123",source:"nextjs-app"},createdAt:new Date().toISOString()};console.log("Sending transaction to Site B:",e);let n=await (0,r.r)(e);d(n),console.log("Site B response:",n)}catch(e){l(e.message),console.error("Transaction failed:",e)}finally{n(!1)}};return(0,t.jsxs)("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[(0,t.jsx)("h1",{children:"Test Transaction to Site B"}),(0,t.jsxs)("p",{children:["This will send transaction data to: ",(0,t.jsx)("code",{children:"http://localhost:3000/transactions"})]}),(0,t.jsx)("button",{onClick:i,disabled:e,style:{padding:"10px 20px",backgroundColor:e?"#ccc":"#0070f3",color:"white",border:"none",borderRadius:"5px",cursor:e?"not-allowed":"pointer"},children:e?"Sending...":"Send Test Transaction"}),a&&(0,t.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#ffebee",border:"1px solid #f44336",borderRadius:"5px",color:"#c62828"},children:[(0,t.jsx)("strong",{children:"Error:"})," ",a]}),s&&(0,t.jsxs)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#e8f5e8",border:"1px solid #4caf50",borderRadius:"5px",color:"#2e7d32"},children:[(0,t.jsx)("strong",{children:"Success! Site B Response:"}),(0,t.jsx)("pre",{style:{marginTop:"10px",fontSize:"12px",overflow:"auto"},children:JSON.stringify(s,null,2)})]}),(0,t.jsxs)("div",{style:{marginTop:"30px",fontSize:"14px",color:"#666"},children:[(0,t.jsx)("h3",{children:"Transaction Data Structure:"}),(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"referenceId:"})," Unique transaction reference"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"amount:"})," Transaction amount (1999)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"type:"})," Transaction type (SALE)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"description:"})," Transaction description"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"metadata:"})," Additional data (orderId, customerId, source)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"createdAt:"})," ISO timestamp"]})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Security:"})," Data is signed with HMAC-SHA256 using SHARED_SECRET"]})]})]})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=7824)),_N_E=e.O()}]);